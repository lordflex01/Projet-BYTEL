{% extends 'header.html.twig' %}

{% block body %}
	<!-- Content Wrapper. Contains page content -->
	<div class="content-wrapper">
		<!-- Content Header (Page header) -->
		<div class="content-header">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-6">
						<h1 class="m-0">
							Mon Profil
						</h1>
					</div>
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
		</div>
		<!-- /.content-header -->

		<!-- Main content -->
		<section class="content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-3">

						<!-- Profile Image -->
						<div class="card card-primary card-outline">
							<div class="card-body box-profile">
								<div class="text-center">
									{% if app.user.image == null %}
										<img class="profile-user-img img-fluid img-circle" src="{{asset ('/uploads/avatar.png')}}" alt="User profile picture">
									{% else %}
										<img class="profile-user-img img-fluid img-circle" src="{{asset ('/uploads/' ~ app.user.image.name)}}" alt="User profile picture">
									{% endif %}
								</div>

								<h3 class="profile-username text-center">{{ app.user.username }}</h3>

								<p class="text-muted text-center"></p>

								<ul class="list-group list-group-unbordered mb-3">

									<li class="list-group-item">
										<b>
											{% if app.user.roles  == ["ROLE_USER"]%}
												Utilisateur
											{% else %}
												Administrateur
											{% endif %}
										</b>

									</li>
									<li class="list-group-item">
										<b>{{ app.user.poste }}</b>

									</li>
									<li class="list-group-item">
										<b>{{ app.user.email }}</b>

									</li>
								</ul>
							</div>
							<!-- /.card-body -->
						</div>
						<!-- /.card -->
					</div>
					<!-- /.col -->
					<div class="col-md-9">
						<div class="card">
							<div class="card-header p-2">
								<ul class="nav nav-pills">
									<li class="nav-item">
										<a class="nav-link active" href="#activity" data-toggle="tab">
											Activit√©s</a>
									</li>
									{% if is_granted('ROLE_ADMIN') %}
										<li class="nav-item">
											<a class="nav-link" href="#domainechange" data-toggle="tab">
												Changer de domaine</a>
										</li>
									{% endif %}
									<li class="nav-item">
										<a class="nav-link" href="#timeline" data-toggle="tab">
											Changer de mot de passe</a>
									</li>
								</ul>
							</div>
							<!-- /.card-header -->
							<div class="card-body">
								<div class="tab-content">
									<div class="active tab-pane" id="activity">
										<!-- Post -->
										<div class="post">
											<div class="user-block">
												{% if app.user.image == null %}
													<img class="img-circle img-bordered-sm" src="{{asset ('/uploads/avatar.png')}}" alt="user image">
												{% else %}
													<img class="img-circle img-bordered-sm" src="{{asset ('/uploads/' ~ app.user.image.name)}}" alt="user image">
												{% endif %}
												<span class="username">
													<a href="">{{ app.user.username }}</a>
													<a href="#" class="float-right btn-tool">
														<i class="fas fa-times"></i>
													</a>
												</span>
												<span class="description">{{app.user.capit}}</span>
											</div>
											<!-- /.user-block -->
											<p>
												{{ app.user.projet.libelle }}:
												{{ app.user.projet.description }}
											</p>
										</div>
										<!-- /.post -->
									</div>
									<!-- /.tab-pane -->
									<div class="tab-pane" id="timeline">
										{% for message in app.flashes('success') %}
											<div class="alert alert-success">
												{{ message }}
											</div>
										{% endfor %}
											{% for msg in app.flashes('danger') %}
											<div class="alert alert-danger">
												{{ msg }}
											</div>
										{% endfor %}
										<form id="PWchange" action="{{ path('pwchange') }}" method="post">
											<div class="form-group">
												<b>Entrez votre nouveau mot de passe</b>
												<input type="password" id="pass2" name="password2" minlength="5" class="form-control" required>
											</div>
											<div class="form-group">
												<b>Confirmer le mot de passe</b>
												<input type="password" id="pass3" name="password3" minlength="5" class="form-control" required>
											</div>
											<div>
												<input type="submit" value="Modifier" style="margin-top:20px" class="btn btn-success float-right">
											</div>
										</form>
									</div>
									<!-- /.card-body -->
									<!-- /.tab-pane -->
									<div class="tab-pane" id="domainechange">
										<form id="domainechange" action="{{ path('domainechange') }}" method="post">
											{% for projet in projets %}

												<div class="form-group">
													<input type="radio" id="projet" name="domainechange" value={{projet.id}}>
													<label for="projet">{{ projet.libelle }}</label>
												</div>

											{% endfor %}
											<div>
												<input type="submit" value="Modifier" class="btn btn-success float-right">
											</div>
										</form>
									</div>
								</div>
								<!-- /.tab-pane -->
							</div>
							<!-- /.tab-content -->
						</div>
						<!-- /.card-body -->
					</div>
					<!-- /.card -->
				</div>
				<!-- /.col -->
			</div>
			<!-- /.row -->
		</div>
		<!-- /.container-fluid -->
	</section>
{% endblock %}
