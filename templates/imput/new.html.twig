{% extends 'header.html.twig' %}
{% block body %}
	<div
		class="content-wrapper">
		<!-- Content Header (Page header) -->
		<div class="content-header">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-6">
						<h2 class="m-0" style="font-size:19px">Ajouter une nouvelle imputation
						</h2>
					</div>
					<div class="col-sm-6">
						<ol class="breadcrumb float-sm-right">
							<li class="breadcrumb-item">
								<a href="/index">Accueil</a>
							</li>
							<li class="breadcrumb-item">
								<a href="/imput">Imputation</a>
							</li>
							<li class="breadcrumb-item active">Nouvelle imputation</li>
						</ol>
					</div>
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container-fluid -->
		</div>
		<!-- /.content-header -->
		{{ include('imput/_form.html.twig') }}

	</div>

{% endblock %}
{% block javascripts %}
	<script>
		window.onload = () => {
collection = document.querySelector("#DateV");
span = collection.querySelector("span");
boutonAjout = document.createElement("button");
boutonAjout.type = "button";
boutonAjout.className = "ajout-DateV btn secondary";
boutonAjout.innerText = "Ajouter une Date valeur";
let nouveauBouton = span.append(boutonAjout);
collection.dataset.index = collection.querySelectorAll("input").length;
boutonAjout.addEventListener("click", function () {
addButton(collection, nouveauBouton);
});
}

function addButton(collection, nouveauBouton) {
let prototype = collection.dataset.prototype;
let index = collection.dataset.index;
prototype = prototype.replace(/__name__/g, index);
let content = document.createElement("html");
content.innerHTML = prototype;
let newForm = content.querySelector("div");
let boutonSuppr = document.createElement("button");
boutonSuppr.type = "button";
boutonSuppr.className = "btn red";
boutonSuppr.id = "delete-DateV-" + index;
boutonSuppr.innerText = "Supprimer cette date valeur";
newForm.append(boutonSuppr);
collection.dataset.index ++;
let boutonAjout = collection.querySelector(".ajout-DateV");
span.insertBefore(newForm, boutonAjout);
boutonSuppr.addEventListener("click", function () {
this.previousElementSibling.parentElement.remove();
})
}
	</script>
{% endblock %}
